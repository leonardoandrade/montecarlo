<!DOCTYPE html>

<head>
  <title>PI estimation by Monte-Carlo (web assembly)</title>
</head>

<body>
  <table>
    <tr>
      <td>
        <h3>Quasi-random (Halton Sequence)</h3>
        <table>
          <tr>
            <td>PI:</td>
            <td>
              <span id="pi_quasi_random" style="font-weight: bold;">0</span>
            </td>
          </tr>
          <tr>
            <td>Divergence: </td>
            <td>
              <span id="pi_divergence_quasi_random" style="font-weight: bold;">0</span>
            </td>
          </tr>
        </table>
      </td>
      <td>
      <h1><p id="countdown"></p></h1>
      </td>
      <td>
        <h3>Pseudo-random</h3>
        <table>
            <tr>
              <td>PI:</td>
              <td>
                <span id="pi_pseudo_random" style="font-weight: bold;">0</span>
              </td>
            </tr>
            <tr>
              <td>Divergence: </td>
              <td>
                <span id="pi_divergence_pseudo_random" style="font-weight: bold;">0</span>
              </td>
            </tr>
          </table>
      </td>
    </tr>
    <tr>
      <td>
        <canvas id="canvas_quasi_random" width="300" height="300"></canvas>
      </td>
      <td style="vertical-align: top">
          <p> #samples:</p>
          <p style="font-weight: bold;">
            <span id="samples">0</span>
          </p>
      </td>
      <td>
        <canvas id="canvas_pseudo_random" width="300" height="300"></canvas>
      </td>
    </tr>
  </table>

  <br>
  <button id="start_button">Start</button>
  <button id="stop_button">Stop</button>
  <button id="reset_button">Reset</button>
</body>

<!-- js glue code, this file is generated by the compiler -->
<script src="montecarlo-pi.js"></script>
<!-- functions for access from C code -->
<script>
  document.getElementById('reset_button').addEventListener('click', () => {
    _reset();
  });

  document.getElementById('start_button').addEventListener('click', () => {
    _start();
  });

  document.getElementById('stop_button').addEventListener('click', () => {
    _stop();
  });

  const startUp = (countdown) => {
    document.getElementById("countdown").innerHTML = countdown;
    if(countdown === 0) {
      document.getElementById("countdown").innerHTML = "GO!";
      setTimeout(() => {
        document.getElementById("countdown").innerHTML = "";
        _start();
        }, 
         500);
      
    }
    else {
      setTimeout(() => { startUp(countdown-1) }, 1000);
    };
  };

  startUp(5)

</script>

</html>